---
import SocialRrss from './subcomponentes/Social-rrss.astro';
import { getLangFromUrl, useTranslations } from '../i18n/utils';
import TermsPolicyCookies from './subcomponentes/TermsPolicyCookies.astro';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<footer id="footer" class="fixed  bottom-0 left-0 right-0 px-6 py-4 transition-opacity duration-300 ease-in-out z-40" style="pointer-events: auto !important; ">
  <div class=" mx-auto flex justify-between items-end">
    <!-- Textos del lado izquierdo -->
    <div class="text-white text-[14px] sm:text-sm">
      <p class="mb-1  text-[11px] leading-[12px] sm:text-sm">{t('copyright')}</p>
      <p class="mb-1 text-[11px] leading-[12px] sm:text-sm">{t('rights')}</p>
    </div>

    <!-- Terms Policy Cookies -->
    <div class="hidden lg:flex items-end justify-end  ">
      <TermsPolicyCookies />
    </div>
    
    <!-- Social RRSS del lado derecho -->
    <div id="footer-social">
      <SocialRrss />
    </div>
  </div>
</footer>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Observer constante de la URL para ocultar footer-social en #contact
    let previousHash = window.location.hash;
    
    setInterval(() => {
      const currentHash = window.location.hash;
      
      if (currentHash !== previousHash) {
        // Ocultar footer-social cuando el hash es #contact
        const footerSocialDiv = document.getElementById('footer-social');
        if (footerSocialDiv) {
          if (currentHash === '#contact') {
            footerSocialDiv.style.display = 'none';
          } else {
            footerSocialDiv.style.display = '';
          }
        }
        
        previousHash = currentHash;
      }
    }, 100); // Revisa cada 100ms
  });
</script>